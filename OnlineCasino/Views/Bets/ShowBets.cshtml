@model IEnumerable<OnlineCasino.Models.Bet>

@{
    ViewData["Title"] = "Player Bets Overview";
}

<h1 class="mb-4">Bets by Players</h1>

<div class="row g-4">
    @foreach (var betGroup in Model.GroupBy(b => b.Player))
    {
        var player = betGroup.Key;
        var playerIdSafe = player?.Id ?? 0; // fallback pokud je null

        <div class="col-md-6 col-lg-4">
            <div class="card shadow-sm h-100 border-3" 
                 style="border-color:@($"#{playerIdSafe * 123456 % 0xFFFFFF:X6}")">
                <div class="card-header text-light fw-bold" 
                     style="background-color:@($"#{(playerIdSafe * 654321) % 0xFFFFFF:X6}")">
                    Player ID: @playerIdSafe
                </div>
                <div class="card-body">
                    <ul class="list-group list-group-flush">
                        @foreach (var bet in betGroup)
                        {
                            var gameColor = $"#{(bet.GameId * 13579) % 0xFFFFFF:X6}";
                            var gameName = bet.Game?.Name ?? "Unknown Game";

                            <li class="list-group-item d-flex justify-content-between align-items-center" 
                                style="background-color:@gameColor; color:white;">
                                <div>
                                    <strong>@gameName</strong> <br />
                                    Bet: @bet.Amount.ToString("C")
                                </div>
                            </li>
                        }
                    </ul>
                </div>
                <div class="card-footer text-end">
                    <strong>Total Bet:</strong> @betGroup.Sum(b => b.Amount).ToString("C")
                </div>
            </div>
        </div>
    }
</div>
